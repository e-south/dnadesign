# dnadesign/infer/config.yaml
model:
  id: evo2_7b
  device: cuda:0
  precision: bf16
  alphabet: dna
  batch_size: 128

jobs:
  - id: 60bp_dual_promoter_cpxR_LexA
    operation: extract
    ingest:
      source: usr
      dataset: 60bp_dual_promoter_cpxR_LexA     # name under usr/datasets/
      root: null                                # optional; auto-detected if omitted
      field: sequence                           # column to read
      # ids: ["<optional-specific-id>", "..."]  # subset if desired
    outputs:
      - id: logits_mean
        fn: evo2.logits
        params: { pool: { method: mean, dim: 1 } }
        format: list
      - id: ll_mean
        fn: evo2.log_likelihood
        params: { method: native, reduction: mean }
        format: float
    io:
      write_back: true
      overwrite: true
