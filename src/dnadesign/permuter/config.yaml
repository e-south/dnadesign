# dnadesign/permuter/config.yaml
permuter:
  experiment:
    name: permuter_demo

  jobs:
    - name: example_scan
      input_file: dnadesign/permuter/input/refs.csv
      references: ["retron_Eco1_msr_msd_wt"]

      run:
        mode: auto             # full | analysis | auto

      permute:
        protocol: scan_dna     # scan_dna | scan_codon
        regions: []            # [] = full sequence; or [[start,end), â€¦]
        lookup_tables: []      # required for scan_codon

      evaluate:
        metrics:
          - id: llr
            name: log_likelihood_ratio
            evaluator: placeholder
            goal: max
            norm: {method: rank, scope: round}

          # - id: emb
          #   name: embedding_distance
          #   evaluator: placeholder
          #   goal: max
          #   norm: {method: z2cdf, scope: round}

      select:
        objective:
          type: weighted_sum
          weights: { llr: 1 }
        strategy:
          type: top_k
          k: 10
          include_ties: true

      iterate:
        enabled: true
        total_rounds: 3

      report:
        csv: true
        plots:
          - scatter_metric_by_position
          - metric_by_mutation_count
          - heatmap_mutation_effects