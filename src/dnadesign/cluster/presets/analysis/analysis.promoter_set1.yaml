# cluster/presets/analysis/promoter_set1.yaml
name: "analysis.promoter_set1"
kind: "analysis"

# These map directly to 'cluster analyze' flags
params:
  composition: true
  diversity: true
  difffeat: true
  plots: true
  font_scale: 1.3

  # Numeric metrics to summarize & plot per cluster (strict numeric)
  numeric:
    - "infer__evo2_7b__60bp_dual_promoter_cpxR_LexA__ll_mean"
    - "obj__logic_fidelity"
    - "obj__effect_scaled"

  # Analyses sliced by these categorical columns
  group_by: ["densegen__plan"]

  # Non-finite (NaN/Inf) in numeric metrics are logged and dropped
  missing_policy: "drop_and_log"

  # OPAL join knobs (only needed if numeric or group_by refer to obj__/pred__/sel__)
  opal_campaign: "prom60-etoh-cipro-andgate"
  opal_as_of_round: 0
  opal_fields:
    - "pred__y_obj_scalar"
    - "obj__logic_fidelity"
    - "obj__effect_scaled"
