cruncher:
  out_dir: runs/
  regulator_sets:
    - [lexA, cpxR, fur]
  regulator_categories:
    Stress: [lexA]
    Envelope: [cpxR]
    Category1: [cpxR, baeR]
    Category2: [lexA, rcdA, lrp, fur]
    Category3: [fnr, fur, acrR, soxR, soxS, lrp]
  campaigns:
    - name: demo_pair
      categories: [Stress, Envelope]
      across_categories:
        sizes: [2]
        max_per_category: 1
      allow_overlap: true
      distinct_across_categories: true
      dedupe_sets: true
    - name: demo_categories
      categories: [Category1, Category2, Category3]
      within_category:
        sizes: [2]
      across_categories:
        sizes: [2, 3]
        max_per_category: 1
      allow_overlap: true
      distinct_across_categories: true
      dedupe_sets: true
      tags:
        organism: ecoli
        purpose: demo_multicat
    - name: demo_categories_best
      categories: [Category1, Category2, Category3]
      across_categories:
        sizes: [2, 3]
        max_per_category: 1
      allow_overlap: true
      distinct_across_categories: true
      dedupe_sets: true
      selectors:
        min_site_count: 8
        source_preference: [regulondb]
      tags:
        organism: ecoli
        purpose: demo_filtered

  io:
    parsers:
      extra_modules: []

  motif_store:
    catalog_root: .cruncher
    source_preference: [regulondb]
    allow_ambiguous: false
    pwm_source: sites
    site_kinds: null
    combine_sites: false
    dataset_preference: []
    dataset_map: {}
    site_window_lengths:
      lexA: 15
      cpxR: 11
      baeR: 20
      rcdA: 10
      lrp: 12
      fur: 12
      fnr: 14
      acrR: 10
      soxR: 18
      soxS: 20
    site_window_center: midpoint
    min_sites_for_pwm: 2
    allow_low_sites: false

  ingest:
    genome_source: ncbi
    genome_fasta: null
    genome_cache: .cruncher/genomes
    genome_assembly: null
    contig_aliases: {}
    ncbi_email: null
    ncbi_tool: cruncher
    ncbi_api_key: null
    ncbi_timeout_seconds: 30
    http:
      retries: 3
      backoff_seconds: 0.5
      max_backoff_seconds: 8.0
      retry_statuses: [429, 500, 502, 503, 504]
      respect_retry_after: true
    regulondb:
      base_url: https://regulondb.ccg.unam.mx/graphql
      verify_ssl: true
      ca_bundle: null
      timeout_seconds: 30
      motif_matrix_source: alignment
      alignment_matrix_semantics: probabilities
      min_sites_for_pwm: 2
      allow_low_sites: false
      curated_sites: true
      ht_sites: false
      ht_dataset_sources: null
      ht_dataset_type: TFBINDING
      ht_binding_mode: tfbinding
      uppercase_binding_site_only: true
    local_sources:
      - source_id: demo_local_meme
        description: Demo DAP-seq motifs + sites (local MEME files)
        root: data/local_motifs
        patterns: ["*.txt"]
        recursive: false
        format_map: {".txt": "MEME"}
        tf_name_strategy: stem
        matrix_semantics: probabilities
        extract_sites: true
        organism:
          name: Escherichia coli
        citation: "Local demo DAP-seq motifs (MEME text, bundled with cruncher demo)"
        tags:
          demo: "true"
          format: meme
          assay: dapseq

  parse:
    plot:
      logo: true
      bits_mode: information
      dpi: 150

  sample:
    bidirectional: true
    seed: 42
    record_tune: false
    progress_bar: true
    progress_every: 1000
    save_trace: true
    init:
      kind: random
      length: 30
      pad_with: background
    draws: 2000
    tune: 1000
    chains: 4
    min_dist: 1
    top_k: 5
    moves:
      block_len_range: [2, 6]
      multi_k_range: [2, 6]
      slide_max_shift: 4
      swap_len_range: [2, 8]
      move_probs:
        S: 0.80
        B: 0.10
        M: 0.10
    optimiser:
      kind: gibbs
      scorer_scale: llr
      cooling:
        kind: linear
        beta: [0.0001, 0.001]
      swap_prob: 0.10
    save_sequences: true

  analysis:
    runs: []
    plots:
      trace: true
      autocorr: true
      convergence: true
      scatter_pwm: true
      pair_pwm: true
      parallel_pwm: true
      pairgrid: true
      score_hist: true
      score_box: false
      correlation_heatmap: true
      parallel_coords: true
    scatter_scale: llr
    subsampling_epsilon: 10.0
